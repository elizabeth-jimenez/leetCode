function largestOverlap(img1, img2) {
    let setImage1 = new Set(), setImage2 = new Set(), res = 0;
    // document the 1s in both images
    for(var i = 0; i < img1.length; i++) {
        for(var j = 0; j < img1.length; j++) {
            if(img1[i][j]) setImage1.add(`${i}_${j}`);
            if(img2[i][j]) setImage2.add(`${i}_${j}`);
        }
    }
    
    for(var i = -(img1.length - 1); i < img1.length; i++) {
        for(var j = -(img1.length - 1); j < img1.length; j++) {
            let count = 0;
            setImage1.forEach(key => {
                const [x, y] = key.split('_');
                if (setImage2.has(`${Number(x) + i}_${Number(y) + j}`)) count++;
            })
            res = Math.max(count, res);
        }
    }

    return res;
}


// let img_1 = [[1,0,0],[0,0,0],[0,0,1]], img_2 = [[1,0,0],[0,0,0],[0,0,0]];
let img_1 = [[1,1,1,0,1,0,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,0,1,1,1,1,1,0,1,0,0],[0,1,1,0,1,1,1,0,1,1,1,0,1,1,1],[0,1,0,1,0,1,0,1,1,1,1,1,1,1,0],[1,1,1,1,1,0,0,0,1,1,1,0,1,1,0],[0,1,0,0,1,0,0,1,1,1,1,1,1,1,0],[1,1,1,0,1,1,1,1,1,0,1,0,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,0,1,1,0,1,1,1,1,1],[1,0,1,0,0,1,1,1,1,1,1,1,0,1,0],[1,1,1,1,1,0,0,1,1,0,0,1,1,1,1],[0,1,1,1,0,1,1,1,0,1,1,0,1,0,1],[1,1,0,1,1,0,1,0,1,1,1,1,1,0,1],[0,1,1,1,1,1,0,1,1,1,0,1,1,0,1],[0,1,0,1,1,0,1,1,1,0,1,1,1,0,1]];
let img_2 = [[1,0,0,1,1,1,1,1,1,1,1,0,1,0,0],[1,0,0,1,0,1,1,1,1,0,1,1,0,1,1],[1,1,1,1,1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,1,0,0,0],[0,1,1,1,0,1,0,0,1,1,0,1,0,1,0],[1,1,1,1,1,1,1,1,0,1,1,1,0,1,1],[1,1,0,1,1,1,1,0,0,1,0,0,1,0,0],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,0],[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,0,1,0,0,1,1,1,1,0,0,1,0],[1,1,1,0,0,1,1,0,1,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1,0,1,1,1],[1,1,1,1,1,1,0,0,1,0,1,1,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]];
console.log(largestOverlap(img_1, img_2)); // 122